---
import { SEO } from "astro-seo";
import { ViewTransitions } from 'astro:transitions';
import '@fontsource/outfit/400.css';
import '@fontsource/outfit/700.css';
import 'aos/dist/aos.css';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<!-- AQUÍ ES DONDE CAMBIAMOS EL ICONO DE LA PESTAÑA -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

        <!-- 
            META KEYWORDS: Aquí van las palabras clave específicas para búsqueda.
            Google ya no le da tanto peso, pero otros buscadores sí.
        -->
        <meta name="keywords" content="sistema dental, gestión de clínicas dentales, software odontológico, sistema dental juliaca, historia clínica digital, odontograma virtual, software para dentistas peru, facturación electrónica sunat, Juliaca, Puno" />
        
        <!-- 
            SEO OPTIMIZADO:
            He mejorado la descripción para incluir "Juliaca" y "Gestión".
        -->
        <SEO
          title={title}
          description="SonriAndes: El sistema dental líder en Juliaca y todo el Perú. Gestión integral de clínicas dentales, agenda inteligente, historias clínicas y facturación SUNAT."
          openGraph={{
            basic: {
              title: "SonriAndes - Software de Gestión Dental en Perú",
              type: "website",
              image: "https://sonriandes.com/og-image.jpg", 
            }
          }}
          extend={{
            // Etiquetas adicionales para mejorar rastreo local
            meta: [
                { name: "geo.region", content: "PE-PUN" }, // Región Puno
                { name: "geo.placename", content: "Juliaca" },
                { name: "geo.position", content: "-15.4909;-70.1343" }, // Coordenadas aprox de Juliaca
                { name: "ICBM", content: "-15.4909, -70.1343" }
            ]
          }}
        />
        <ViewTransitions />
	</head>
	<body class="bg-white font-['Outfit'] text-slate-900 antialiased relative selection:bg-blue-200 selection:text-blue-900 flex flex-col min-h-screen">
		
        <!-- Fondo Decorativo -->
        <div class="fixed inset-0 -z-10 h-full w-full bg-white">
            <div class="absolute h-full w-full bg-[linear-gradient(to_right,#f0f0f0_1px,transparent_1px),linear-gradient(to_bottom,#f0f0f0_1px,transparent_1px)] bg-[size:6rem_4rem]"></div>
            <div class="absolute top-0 left-0 -translate-x-1/4 translate-y-[-10%] h-[500px] w-[500px] rounded-full bg-blue-400/20 blur-[100px]"></div>
            <div class="absolute bottom-0 right-0 translate-x-1/4 translate-y-[10%] h-[500px] w-[500px] rounded-full bg-teal-400/20 blur-[100px]"></div>
        </div>

		<slot />
        
        <!-- Script de Animaciones -->
        <script>
            import AOS from "aos";
            
            // Inicializa AOS cuando carga la página
            AOS.init({
                duration: 800, // Duración de la animación en ms (0.8 segundos)
                offset: 100,   // Distancia en px para activar la animación
                once: true,    // Si true, la animación solo pasa una vez al bajar
                easing: 'ease-out-cubic', // Efecto de suavizado
            });
        </script>

        <!-- Botón Flotante de WhatsApp -->
        <a 
          href="https://wa.me/51906771606?text=Hola,%20quiero%20información%20sobre%20SonriAndes" 
          target="_blank"
          class="fixed bottom-6 right-6 z-50 group"
          aria-label="Contactar por WhatsApp"
        >
          <!-- Efecto de onda (Ping) -->
          <span class="absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75 animate-ping"></span>
          
          <!-- El botón real -->
          <div class="relative flex items-center justify-center w-14 h-14 bg-green-500 rounded-full shadow-lg hover:bg-green-600 transition-all hover:scale-110">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
          </div>
          
          <!-- Tooltip -->
          <span class="absolute right-16 top-1/2 -translate-y-1/2 bg-white text-slate-800 px-3 py-1 rounded-lg shadow-md text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
            ¿Te ayudo?
          </span>
        </a>
	</body>
</html>

<style is:global>
    /* Estilos globales opcionales */
	body {
        /* Evita el salto de scroll al cargar */
        overflow-y: scroll; 
    }
</style>